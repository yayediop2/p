<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Library Book Catalog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'library-blue': '#2c3e50',
                        'library-gray': '#ecf0f1',
                        'accent-yellow': '#f39c12',
                        'accent-green': '#27ae60',
                    },
                },
            },
        };
    </script>
</head>

<body class="bg-gradient-to-br from-library-gray to-gray-200 min-h-screen font-sans">
    <div class="container mx-auto px-4 py-10">
        <h1 class="text-5xl font-extrabold text-center text-library-blue mb-10 tracking-wide">
            School Library Book Catalog
        </h1>

        <div class="relative mb-8">
            <input type="text" id="searchInput" placeholder="🔍 Search books by title, author, or genre"
                class="w-full p-4 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-accent-yellow transition">
        </div>

        <div id="bookGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Books will be dynamically inserted here -->
        </div>
    </div>

    <script>
        async function fetchBooks() {
            try {
                const response = await fetch('books.json');
                return await response.json();
            } catch (error) {
                console.error('Error fetching books:', error);
                return [];
            }
        }

        function createBookCard(book) {
    const availabilityClass = book.available 
        ? 'bg-accent-green text-white' 
        : 'bg-red-500 text-white';

    return `
        <div class="relative flex flex-col text-gray-700 bg-white shadow-md bg-clip-border rounded-xl overflow-hidden transition hover:shadow-2xl hover:scale-105">
            <div class="relative flex justify-center items-center mx-4 mt-4 overflow-hidden bg-white rounded-xl h-96">
                <img 
                    src="${book.coverImage}" 
                    alt="${book.title}" 
                    class="object-cover w-auto h-full rounded-xl"
                />
            </div>
            <div class="p-6">
                <div class="flex items-center justify-between mb-2">
                    <p class="block font-sans text-base font-medium leading-relaxed text-library-blue">
                        ${book.title}
                    </p>
                    <p class="block font-sans text-sm font-medium leading-relaxed text-gray-500">
                        ${book.genre || 'No Genre'}
                    </p>
                </div>
                <p class="block font-sans text-sm font-normal leading-normal text-gray-700 opacity-75">
                    ${book.description}
                </p>
            </div>
            <div class="flex justify-between items-center p-6 pt-0">
                <span class="px-3 py-1 text-sm font-medium rounded-full ${availabilityClass}">
                    ${book.available ? 'Disponible' : 'Non disponible'}
                </span>
               
            </div>
        </div>
    `;
}




        async function renderBooks() {
            const bookGrid = document.getElementById('bookGrid');
            const searchInput = document.getElementById('searchInput');
            const books = await fetchBooks();

            function displayBooks(filteredBooks) {
                bookGrid.innerHTML = filteredBooks.length
                    ? filteredBooks.map(createBookCard).join('')
                    : '<p class="col-span-full text-center text-gray-500">No books found</p>';
            }

            displayBooks(books);

            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const filteredBooks = books.filter(book =>
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm) ||
                    (book.genre && book.genre.toLowerCase().includes(searchTerm))
                );
                displayBooks(filteredBooks);
            });
        }

        renderBooks();
    </script>
</body>

</html>